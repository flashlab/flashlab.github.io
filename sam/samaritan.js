function getUrlParameter(t){for(var e=window.location.search.substring(1).split("&"),a=0;a<e.length;a++){var n=e[a].split("=");if(n[0]==t)return n[1]}}function processMessageFromHash(){var t=decodeURIComponent(window.location.hash.slice(1));t&&setTimeout((function(){executeSamaritan(t)}),$State.wordTime)}$State={isText:!1,wordTime:750,wordAnim:150,randomInterval:18e3,lastRandomIndex:-1,randomTimer:null,lastMouseUp:-1},$.fn.textWidth=function(){var t=$(this).html(),e="<span>"+t+"</span>";$(this).html(e);var a=$(this).find("span:first").width();return $(this).html(t),a},$(document).ready((function(){$State.triangle=$("#triangle"),$State.text=$("#main p"),$State.line=$("#main hr"),blinkTriangle();var t=getUrlParameter("msg");void 0!==t?(t=t.split("%20").join(" ").split("%22").join("").split("%27").join("'"),$State.phraselist=[t],setTimeout((function(){executeSamaritan(t)}),$State.wordTime)):processMessageFromHash(),$(window).on("hashchange",processMessageFromHash),$.ajax({dataType:"json",url:"phraselist.json"}).done((function(t){void 0!==$State.phraselist&&(t=t.concat($State.phraselist)),$State.phraselist=t,$(document).bind("mouseup",(function(){Date.now()-$State.lastMouseUp<=500&&(console.log("DblClick"),screenfull.enabled&&screenfull.toggle()),$State.lastMouseUp=Date.now()})).bind("click",runRandomPhrase),randomTimePhrase()}))}));var blinkTriangle=function(){$State.isText||$State.triangle.fadeTo(500,0).fadeTo(500,1,blinkTriangle)},runRandomPhrase=function(){for(var t=Math.floor(Math.random()*($State.phraselist.length-0));t==$State.lastRandomIndex;)t=Math.floor(Math.random()*($State.phraselist.length-0));$State.lastRandomIndex=t,executeSamaritan($State.phraselist[t])},randomTimePhrase=function(){null!==$State.randomTimer&&clearTimeout($State.randomTimer);var t=Math.floor(3e3*Math.random());t+=$State.randomInterval,$State.randomTimer=setTimeout(runRandomPhrase,t)},executeSamaritan=function(t){if(!$State.isText){$State.isText=!0;var e=t.split(" ");$State.triangle.finish().animate({"font-size":"0em",opacity:"1"},{duration:$State.wordAnim,done:function(){var t=0;e.forEach((function(e,a){var n=$State.wordTime;e.length>8&&(n*=e.length/8),setTimeout((function(){$State.text.addClass("hidden").html(e),$State.line.animate({width:$State.text.textWidth()+18+"px"},{duration:$State.wordAnim,start:$State.text.removeClass("hidden")})}),t+$State.wordAnim),t+=n})),setTimeout((function(){$State.text.html(""),$State.triangle.finish().animate({"font-size":"2em",opacity:"1"},{duration:$State.wordAnim,done:function(){$State.isText=!1,randomTimePhrase(),blinkTriangle(),$State.line.animate({width:"30px"},{duration:$State.wordAnim,start:$State.text.removeClass("hidden")})}})}),t+$State.wordTime)}})}};